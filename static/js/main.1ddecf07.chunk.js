(this["webpackJsonpmy-chat"]=this["webpackJsonpmy-chat"]||[]).push([[0],{137:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),i=n(10),a=n.n(i),o=(n(96),n(11)),r=(n(97),n(16)),l=n(190),u=n(49),j=n(180),b=n(183),d=n(185),h=n(186),m=n(182),O=n(184),f=n(138),x=n(187),p=n(177),g=n(198),v=n(188),y=n(5),w=Object(p.a)((function(e){return{paper:{padding:"6px 16px"},message:{color:"green"},timelineOppositeContent:{flex:0,display:"none"},mine:{backgroundColor:"rgba(0, 0, 0, 0.2)"}}})),S=function e(t,n){Object(u.a)(this,e),this.username="",this.hour=(new Date).getTime(),this.message="",this.sent=!1,this.read=!1,this.username=t,this.message=n};function k(e){var t=e.username,n=e.hour,s=e.message,c=(e.sent,e.read,e.myUsername),i=w();return Object(y.jsxs)(j.a,{children:[Object(y.jsx)(m.a,{className:i.timelineOppositeContent}),Object(y.jsxs)(b.a,{children:[Object(y.jsx)(O.a,{children:Object(y.jsx)(g.a,{children:t.slice(0,2).toUpperCase()})}),Object(y.jsx)(d.a,{})]}),Object(y.jsx)(h.a,{children:Object(y.jsxs)(f.a,{elevation:3,className:"".concat(i.paper," ").concat(t!==c?i.mine:""),children:[Object(y.jsx)(x.a,{variant:"subtitle1",component:"p",children:t}),Object(y.jsx)(x.a,{variant:"body2",children:"".concat(new Date(n).toLocaleDateString("es-ES")," - ").concat(new Date(n).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}))}),Object(y.jsx)(v.a,{}),Object(y.jsx)(x.a,{children:s})]})})]})}var N=n(197),C=n(189),E=n(81),U=n.n(E),F=Object(p.a)((function(e){return{textField:{width:"100%"},iconButton:{border:"6px solid rgba(0,0,0,0.5)",width:"50px",height:"50px",marginLeft:"10px"}}}));function M(e){var t=e.sendMessage,n=e.socket,c=e.username,i=F(),a=Object(s.useState)(""),r=Object(o.a)(a,2),l=r[0],u=r[1],j=Object(s.useState)(!1),b=Object(o.a)(j,2),d=b[0],h=b[1],m=Object(s.useState)(""),O=Object(o.a)(m,2),f=O[0],p=O[1];Object(s.useEffect)((function(){return n.on("writting",(function(e){h(!0),p(e)})),function(){n.off("writting"),setTimeout((function(){h(!1)}),1e3)}}),[d,n]);return Object(y.jsxs)("div",{style:{padding:"10px 20px"},children:[d?Object(y.jsxs)(x.a,{variant:"subtitle2",component:"p",children:[f," is writting..."]}):Object(y.jsx)(x.a,{style:{color:"white"},variant:"subtitle2",component:"p",children:"."}),Object(y.jsxs)("form",{style:{display:"flex",alignItems:"center"},onSubmit:function(e){e.preventDefault(),t(l),u("")},children:[Object(y.jsx)(N.a,{className:i.textField,id:"outlined-multiline-flexible",rowsMax:2,value:l,onChange:function(e){u(e.target.value),setTimeout((function(){n.emit("writting",c)}),500)},variant:"outlined",type:"text"}),Object(y.jsx)(C.a,{className:i.iconButton,type:"submit",children:Object(y.jsx)(U.a,{})})]})]})}function T(e){var t=e.socket,n=e.userName,c=Object(s.useState)([]),i=Object(o.a)(c,2),a=i[0],u=i[1];Object(s.useEffect)((function(){return t.on("chat message",(function(e){u([].concat(Object(r.a)(a),[e]))})),function(){t.off("chat message")}}),[a,t]);var j=Object(s.useRef)(null);return Object(s.useEffect)((function(){!function(){var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[a]),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{style:{height:"90vh",overflowY:"scroll",padding:0,margin:0},children:[Object(y.jsx)(l.a,{align:"left",children:a.map((function(e){return Object(y.jsx)(k,{hour:e.hour,message:e.message,read:e.read,sent:e.sent,username:e.username,myUsername:n},e.hour)}))}),Object(y.jsx)("div",{ref:j})]}),Object(y.jsx)(M,{sendMessage:function(e){if(e){var s=new S(n,e);u([].concat(Object(r.a)(a),[s])),t.emit("chat message",s)}},socket:t,username:n})]})}var D=n(195),I=n(82),L=n(191),B=n(192),z=n(194),J=n(193),W=Object(p.a)({root:{width:"fit-content"},title:{fontSize:14},pos:{marginBottom:12},textField:{width:"100%"},button:{marginTop:"10px"}});function H(e){var t=e.socket,n=e.setUserName,c=W(),i=Object(s.useState)(""),a=Object(o.a)(i,2),r=a[0],l=a[1],u=Object(s.useState)(!1),j=Object(o.a)(u,2),b=j[0],d=j[1];Object(s.useEffect)((function(){return t.on("signin",(function(e){""===e&&d(!0),console.log(e),n(e)})),function(){t.off("signin")}}),[t,r,n]);return Object(y.jsx)(L.a,{className:c.root,style:{position:"absolute",top:"40vh",left:"42vw"},children:Object(y.jsxs)(B.a,{children:[Object(y.jsx)(x.a,{variant:"h5",component:"h2",children:"Welcome to myChat"}),b?Object(y.jsx)(x.a,{className:c.pos,style:{color:"red"},children:"This username isn't available"}):Object(y.jsx)(x.a,{className:c.pos,color:"textSecondary",children:"Just enter a username"}),Object(y.jsx)(J.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r&&t.emit("signin",r)},children:[Object(y.jsx)(N.a,{className:c.textField,id:"outlined-multiline-flexible",value:r,onChange:function(e){return l(e.target.value)},variant:"outlined",placeholder:"Your username",type:"text"}),Object(y.jsx)(z.a,{className:c.button,variant:"contained",color:"primary",type:"submit",children:"SignIn"})]})})]})})}var P=n(196),Y=Object(p.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function A(e){var t=e.onShowUsers,n=e.onHideUsers,s=(e.socket,e.users),c=Y();return Object(y.jsx)("div",{style:{position:"absolute",right:"5px",top:"95px"},onMouseEnter:t,onMouseLeave:n,children:Object(y.jsx)(L.a,{style:{backgroundColor:"white",width:"fit-content"},className:c.root,elevation:10,children:Object(y.jsxs)(B.a,{children:[Object(y.jsx)(x.a,{variant:"h5",component:"h2",children:"Connected Users"}),s.map((function(e,t){return Object(y.jsxs)("div",{children:[Object(y.jsx)(x.a,{style:{textAlign:"center"},variant:"body2",component:"p",children:e}),Object(y.jsx)(v.a,{})]},t)}))]})})})}var R=Object(I.io)("https://mychat-server-scl.herokuapp.com/");var V=function(){console.log("https://mychat-server-scl.herokuapp.com/");var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(!1),a=Object(o.a)(i,2),r=a[0],l=a[1],u=Object(s.useState)([]),j=Object(o.a)(u,2),b=j[0],d=j[1];Object(s.useEffect)((function(){return R.on("connected users",(function(e){console.log(e),d(e)})),function(){R.off("connected users")}}),[b]);var h=function(){l(!0)},m=function(){l(!1)};return Object(y.jsxs)(D.a,{maxWidth:"xl",children:[Object(y.jsx)("div",{style:{width:"fit-content",position:"absolute",zIndex:1,right:"5px"},onMouseEnter:h,onMouseLeave:m,children:Object(y.jsx)(P.a,{style:{width:"100px",height:"100px"}})}),r?Object(y.jsx)(A,{onShowUsers:h,onHideUsers:m,socket:R,users:b}):"",n.length?Object(y.jsx)(T,{socket:R,userName:n}):Object(y.jsx)(H,{socket:R,setUserName:c})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,200)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),s(e),c(e),i(e),a(e)}))};a.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(V,{})}),document.getElementById("root")),q()},96:function(e,t,n){},97:function(e,t,n){}},[[137,1,2]]]);
//# sourceMappingURL=main.1ddecf07.chunk.js.map